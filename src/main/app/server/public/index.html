<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/css/style.css">
    <title>Vue with Web Service Demo</title>

    <!-- Vue development version, includes helpful console warnings -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <!-- Axios library -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


</head>
<body>

<nav>
    <div class="wrapper1">
        <div class="logo"><img id="logo" src="./assets/logo.png" alt="logo"></div>
        <ul class="nav-links">
            <li>
                <form id="glassesForm" action="" >
                    <img id="searchimg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAdFJREFUSEu1ld1RwzAQhPckBiyHGUgHUAFJBYQOQgXQAdABVIBTAaEDqIBQAe4AOiCegYgH5GMkLGOCLSdDokdL2m/vR2fCmhetWR+NANZ6Lyc6AzAAc88ZIUoBTATziJR6WcRcLcDMZgm+xZsXUSKj6KIN8gdgZrMURAfFxVthTELb29Y5+O2tl0t5DuDERySjqB/0Ud2sOM+EMQMvPC9QgCYAdsA8knFsobWrjMDlHHi2p4QxfSvOr6+7eRRduzp8r4n4+LigbndaQJ7ceWC/qSYloHRfcfSp9SkBN7+sMU8FUd8KGq3HLl2BKKoAl3vv3ot+vr8PpRCuBgYYE3BIzPcijodlFERpUy1+AFqzFZFKhVvXppF5KuO466At95YC1FWxAGRSqd26/dYUhVrQp4iBxw2lfCP8uhIsctsjWqrIdW26iHsAmQB6rW3qCuZHhG3FPD8KPjQhHkBk834llbpsfWj+wNyoGAtjRnOjws6o01KQKBVaH9nHFyxyw8hoMpYBSMA8dHMrAAn3PLOdMYNi+GUMpMScCqLE5tyNkq2tSQjy7x9OG+TfAJvDKoTz/Hij07nzuV0JwEPM5uagKm6/rwywcJu2vd5l99cewRf80BEow+YK9wAAAABJRU5ErkJggg=="/>
                    <input type="text" id="searchQuery" onfocus="this.value=''" placeholder="Search" required>
                </form>
            </li>
            <li><a id="homeLink" ><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAYBJREFUSEvNlL8uREEUxn+fQuMBFBJ2xZ9QKhQkoiQhCpWGRKfX8AREqxOJJ1AhOoVQSSQSCSKsQuEBJCrHnc3szey6u3fuxiamm+Sc73fOmTOf6PBRh/WJBphZL3AKfAOLkj5iiosCePFrYNCLvgBTMZBcgBe/BIaBNw8YAJ6AmTxIS0BD5e/AtAdcAX1AbidNAVnikqodmJnrIAqSCWglXnvYWMgvQIx4EUgdoIh4LCQFNGyLyy9LqsTsupmVgFcfW7ddIeAeGK8JSspd4RBuZhbcbyVNuHsIeARG/gjwIGmsDhDMtFpJrQMzG5L03DgqM+sCSpLcX3CrW5eXFpqRmAaa2QUwCyxIcj6UHjNbBw6Bc0nz7QLWkiqPgE9gw5tdNzAH7AM9wLKk47YAvvU9YDNjm1yn25J22h5R8C4rie+sApPAVzKym8SLDiSdNHu7qDeI+QP/EuAcs79I9UFsRVI5zM0yuyVgFxgtCLkDtiSdtQQUFM0NL+Q3uWoZAT9SFtIZp/mi/gAAAABJRU5ErkJggg=="/></a></li>
            <li><a id="productsLink" ><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAATJJREFUSEvtlTtKBGEQhL86hGggGohgYuBGegPBwKOoLOIj0sgFZcXL6A0EAzURRANBYdFblI7MLD07O69gQWEnGpjq/v6uLv4RE3404f5MAbUOFyyyfQNsZpWSKm207UC5lrQVqbli2x3gPidoB0hKO5IehweMzWz3gAOgL6lbO38Q2O4De0BP0lEZ4B1YANYl3bUEbAC3wIekxQIg2JMTtIR8AnPRpuEOgj0XkvbbNM60ti+B3WhTBLwCyyWNn4GupCRh2N5OmgArJfoXSb/fIiDGbVzdm6SlFPAFzFZNmcW7ABiX+5GsD/tWaf8mIDtVNlHbCbKIrUp6CslYAx6AgaT5dAeNtXEHZ8BhxeJOf26NkxTQWBsByfsxsAPMBNAAuJJ0HqZqrJ3+cGpvlP9v0Td1A6AZXHJqbQAAAABJRU5ErkJggg=="/></a></li>
        </ul>
    </div>
</nav>



<div id="home">

    <div class="slideshow-container">

        <div class="myBox">
            <img id="mainlogo" src="./assets/logo.png" alt="logo"> <br><br><br><br>
            <form id="glassesForm1" action="" >
                <input type="text" id="searchQuery1" onfocus="this.value=''" placeholder="Search" required>
                <img id="searchimg1" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAdFJREFUSEu1ld1RwzAQhPckBiyHGUgHUAFJBYQOQgXQAdABVIBTAaEDqIBQAe4AOiCegYgH5GMkLGOCLSdDokdL2m/vR2fCmhetWR+NANZ6Lyc6AzAAc88ZIUoBTATziJR6WcRcLcDMZgm+xZsXUSKj6KIN8gdgZrMURAfFxVthTELb29Y5+O2tl0t5DuDERySjqB/0Ud2sOM+EMQMvPC9QgCYAdsA8knFsobWrjMDlHHi2p4QxfSvOr6+7eRRduzp8r4n4+LigbndaQJ7ceWC/qSYloHRfcfSp9SkBN7+sMU8FUd8KGq3HLl2BKKoAl3vv3ot+vr8PpRCuBgYYE3BIzPcijodlFERpUy1+AFqzFZFKhVvXppF5KuO466At95YC1FWxAGRSqd26/dYUhVrQp4iBxw2lfCP8uhIsctsjWqrIdW26iHsAmQB6rW3qCuZHhG3FPD8KPjQhHkBk834llbpsfWj+wNyoGAtjRnOjws6o01KQKBVaH9nHFyxyw8hoMpYBSMA8dHMrAAn3PLOdMYNi+GUMpMScCqLE5tyNkq2tSQjy7x9OG+TfAJvDKoTz/Hij07nzuV0JwEPM5uagKm6/rwywcJu2vd5l99cewRf80BEow+YK9wAAAABJRU5ErkJggg=="/>
            </form>
            
        </div>
        <div class="mySlides fade">
            <img src="./assets/slide1.jpg" style="width:100%">
        </div>

        <div class="mySlides fade">
            <img src="./assets/slide2.jpg" style="width:100%">
        </div>

        <div class="mySlides fade">
            <img src="./assets/slide3.jpeg" style="width:100%">
        </div>


    </div>
    <br>

    <div style="text-align:center">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
    </div>

</div>




<!--    <a v-for="eyewear in eyewears" :key="eyewear.id" :href="'/glasses/' + eyewear.id" class="product-item">-->
<!--        <img :src="eyewear.image_url" alt="Product Image">-->
<!--        <div class="product-details">-->
<!--            <b>id</b>: {{ eyewear.id }}<br>-->
<!--            <b>name</b>: {{ eyewear.name }}<br>-->
<!--            <b>brand</b>: {{ eyewear.brand }}<br>-->
<!--            <b>price</b>: {{ eyewear.price }}-->
<!--        </div>-->
<!--    </a>-->

    <div id="app1">
        <div id="app">
            <div v-if="eyewears.length > 0">
                <h1>Eyewear</h1>
            <div class="product-grid">
                    <a v-for="eyewear in eyewears" :key="eyewear.id" class="product-item" @click="getProduct(eyewear.id)" >
                        <div class="wrapper">
                            <div class="container">
                                <div class="top">
                                    <img :src="eyewear.image_url" alt="Product Image">
                                </div>
                                <div class="bottom">
                                        <div class="details">
                                            <h3>{{ eyewear.name }}</h3>
                                            <p>{{ eyewear.price }}</p>

                                    </div>
                                </div>
                                <div class="inside">
                                    <div class="icon"><i class="material-icons"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAlVJREFUSEvFlUuIzlEYxn+PhImm2DFCWVAmpMZKjZVckhBjMaOUJJnGYrIwcsnMapJyK1kQSiw0uUZZyGUnt0gYNNkqmnKJvM47nW/6vjP///f5vpqc1b/zf895nnPe53mOGOWhUd6fsgBmNh5YDywHFgCzAAM+Ak+BW8AVSb/yiOYCmNkK4GTctNxB3wHbJd3NKsoEMLMDgen+uGAAuATcAJ7FuYXAamAjMD3OdUo6nIKMACjafBBoBa5J8msZMcxsDLABOAPUAR2SjhYXlgCYmbO6CnwPjJskvfwXEZjZYuAh4IDNkh4U1g0DmNkk4A0wFWiTdCHd3MLxfE5S1sl3AUeA16Hx8wuNLwbYAZwI9/oKaMy6lgoA46K6nOBaSX1DZAoswzFvAq6cnZIcqOphZj3AHuC0pG0pwKfwowGYLel91bu7QcyWAPeBJ5IWpQDfohLqJP3IUU1uD7zezKYAn4EvkianAC5Lb3S9JP/OkmUlgHrgKzAoyb9LeuDdnxMV8KJGAL+Wxy4USfNSgItBYpuA3ZJ6awTYCxwKfTwf+rg5BWgDzgFvgbmS/lTpg7HBP/3ADKBF0uUUwK3u1+QFWySdrRKgHfCYcLO60X6WAEQVLANu1xAVTcCjGBVLJblUh0aW5buA7qiGVknX8zwRw67FjQVMDBJtl3S8uD4vrvcF8IOx8EOMa3f6c8AjoTGYaU1M0mnxEfIkPZaSKffgrArBdyq6u5yx/cHZKuleVlGlJ3NCYL0OWOmNC7k/M7J1tbje7wB9kn7nMfi/j34tgZeu+QtyfuYZe3ZfmwAAAABJRU5ErkJggg=="/></i></div>
                                    <div class="contents">
                                        <table>
                                            <tr>
                                                <th>Brand</th>
                                                <th>Model</th>
                                            </tr>
                                            <tr>
                                                <td>{{ eyewear.brand }}</td>
                                                <td>{{ eyewear.model }}</td>
                                            </tr>

                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
            </div>
                <!-- Display a message when no records are found -->
            </div>
            <div v-else>
                <br><br>
                <p>No records found.</p>
            </div>

            <div class="pagination">
                <div class="container">
                    <span v-for="page in pages" :key="page">
                        <div class="index" @click="changePage(page)">{{page}}</div>
                    </span>
                    <svg viewBox="0 0 100 100">
                        <path
                                d="m 7.1428558,49.999998 c -1e-7,-23.669348 19.1877962,-42.8571447 42.8571442,-42.8571446 23.669347,0 42.857144,19.1877966 42.857144,42.8571446" />
                    </svg>
                    <svg viewBox="0 0 100 100">
                        <path
                                d="m 7.1428558,49.999998 c -1e-7,23.669347 19.1877962,42.857144 42.8571442,42.857144 23.669347,0 42.857144,-19.187797 42.857144,-42.857144" />
                    </svg>
                </div>
            </div>
        </div>



        <div id="prod">
            <div id="productPage">
                <div class="container">
                    <div class="images">
                        <img id="prodImage"/>
                    </div>
                    <div class="product">
                        <p id="prodModel"></p>
                        <h1 id="prodName"></h1>
                        <h2 id="prodPrice"></h2>
                        <p class="desc" id="description"></p>
                        <div class="buttons">
                            <button class="add">Add to Cart</button>
                            <button class="like"><span>â™¥</span></button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="productPage2">
                <h2>Available at:</h2>
                <ul v-for="product in productSame" :key="product.id" >
<!--                    <li> <b>name</b>: {{ product.name }}</li>-->
                    <li>
                        <div class="icon"></div>
<!--                        <div v-if="product.url "><div>-->
                        <a :href="product.url" class="title">{{product.name}}</a>
<!--                        <div class="descr">{{product.url}}</div>-->
                    </li>
                </ul>
            </div>
        </div>
    </div>
<!--        &lt;!&ndash; Your pagination component... &ndash;&gt;-->
<!--        <pagination v-for="i of totalPages" :total-pages="totalPages" :current-page="currentPage" @change-page="changePage">-->
<!--            <div class="pagination">-->
<!--                <div class="container">-->
<!--            <span>-->
<!--                <div class="index" @click="changePage(i)">i</div>-->
<!--            </span>-->
<!--                    <svg viewBox="0 0 100 100">-->
<!--                        <path-->
<!--                                d="m 7.1428558,49.999998 c -1e-7,-23.669348 19.1877962,-42.8571447 42.8571442,-42.8571446 23.669347,0 42.857144,19.1877966 42.857144,42.8571446" />-->
<!--                    </svg>-->
<!--                    <svg viewBox="0 0 100 100">-->
<!--                        <path-->
<!--                                d="m 7.1428558,49.999998 c -1e-7,23.669347 19.1877962,42.857144 42.8571442,42.857144 23.669347,0 42.857144,-19.187797 42.857144,-42.857144" />-->
<!--                    </svg>-->
<!--                </div>-->
<!--            </div>-->


    <!--    <div class="product-grid">-->
<!--        <a v-for="eyewear in eyewears" :key="eyewear.id" :href="'/glasses/' + eyewear.id" class="product-item">-->
<!--            <img :src="eyewear.image_url" alt="Product Image">-->
<!--            <div class="product-details">-->
<!--                <b>id</b>: {{ eyewear.id }}<br>-->
<!--                <b>name</b>: {{ eyewear.name }}<br>-->
<!--                <b>brand</b>: {{ eyewear.brand }}<br>-->
<!--                <b>price</b>: {{ eyewear.price }}-->
<!--            </div>-->
<!--        </a>-->
<!--    </div>-->




    <!--        <a v-for="eyewear in eyewears" :key="eyewear.id" :href="'/glasses/' + eyewear.id" class="product-item">-->
    <!--            <img :src="eyewear.image_url" alt="Product Image">-->
    <!--            <div class="product-details">-->
    <!--                <b>id</b>: {{ eyewear.id }}<br>-->
    <!--                <b>name</b>: {{ eyewear.name }}<br>-->
    <!--                <b>brand</b>: {{ eyewear.brand }}<br>-->
    <!--                <b>price</b>: {{ eyewear.price }}-->
    <!--            </div>-->
    <!--        </a>-->
    <!--    </div>-->

<!-- Link to api.js -->

<script>

    let slideIndex = 0;
    showSlides();

    function showSlides() {
        let i;
        let slides = document.getElementsByClassName("mySlides");
        let dots = document.getElementsByClassName("dot");
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        slideIndex++;
        if (slideIndex > slides.length) {slideIndex = 1}
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex-1].style.display = "block";
        dots[slideIndex-1].className += " active";
        setTimeout(showSlides, 3000); // Change image every 2 seconds
    }


    document.addEventListener('DOMContentLoaded', function () {

        // Get the "Products" link by its ID
        var homeLink = document.getElementById('homeLink');
        var appElement = document.getElementById('app');
        var searchbox=document.getElementById('searchQuery1');
        var prod = document.getElementById("prod");

        // Get the #app element
        var homeElement = document.getElementById('home');


        // Add a click event listener to the "Products" link
        homeLink.addEventListener('click', function (event) {
            // Prevent the default link behavior
            event.preventDefault();
            // Toggle the display property of the #app element
            homeElement.style.display = 'block';
            searchbox.value="";
            appElement.style.display='none';
            prod.style.display="none";
        });
    });


    document.addEventListener('DOMContentLoaded', function () {

        // Get the "Products" link by its ID
        var productsLink = document.getElementById('productsLink');

        // Get the #app element
        var appElement = document.getElementById('app');
        var homeElement = document.getElementById('home');
        var prod = document.getElementById("prod");

        var search = document.getElementById('searchQuery');
        var search1=document.getElementById('searchQuery1');



        // Add a click event listener to the "Products" link
        productsLink.addEventListener('click', function (event) {
            // Prevent the default link behavior
            event.preventDefault();
            search.value='';
            search1.value='';
            // Toggle the display property of the #app element
            appElement.style.display = 'block';
            homeElement.style.display = 'none';
            prod.style.display="none";
        });
    });

    // Listen for the Enter key press
    const searchbox=document.getElementById('searchQuery');
    const searchbox1=document.getElementById('searchQuery1');

        searchbox.addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            searchbox1.value="";
            document.getElementById('app').style.display = 'block';
            document.getElementById('home').style.display = 'none';
            document.getElementById("prod").style.display="none";
            event.preventDefault();

        }
    });

    searchbox1.addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            searchbox.value="";
            document.getElementById('app').style.display = 'block';
            document.getElementById('home').style.display = 'none';
            event.preventDefault();

        }
    });

    // var prod = new Vue({
    //     el: '#prod',
    //
    // })

    var app = new Vue({
        el: '#app1',
        data: {
            eyewears: [],
            productSame: [],
            pages: [],
            searchQuery: '',
            currentPage: 1,
            itemsPerPage: 27,
            totalRows: 0,
        },
        methods: {
            // Get all the glasses from the web service using Axios.
            loadAllEyewear: function () {
                var localApp = this;
                const searchQuery = document.getElementById('searchQuery').value;
                const searchQuery1 = document.getElementById('searchQuery1').value;
                var query = "";

                var offset = (localApp.currentPage - 1) * localApp.itemsPerPage;

                if (searchQuery === "" && searchQuery1 !== "") {
                    query = searchQuery1
                } else if (searchQuery1 === "" && searchQuery !== "") {
                    query = searchQuery
                } else {

                }

                var api1 = '/glasses/' + query;

                axios.get(api1)
                    .then(function (response) {
                        localApp.totalRows = response.data.data.length;
                        console.log(response.data.data.length);
                        console.log(localApp.totalRows);
                        localApp.totalPages();
                    })

                var apiEndpoint = '/glasses/' + query + '?num_items=' + localApp.itemsPerPage + '&offset=' + offset;

                axios.get(apiEndpoint)
                    .then(function (response) {
                        localApp.eyewears = response.data.data;
                        console.log(JSON.stringify(response.data.data));
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
            },
            changePage: function (newPage) {
                this.currentPage = newPage;
                this.loadAllEyewear();
            },
            getProduct: function (id) {
                var app = document.getElementById("app");
                var prod = document.getElementById("prod");
                var localApp = this;
                var apiEndpoint = '/glasses/' + id;
                app.style.display = 'none';
                prod.style.display = 'block';

                axios.get(apiEndpoint)
                    .then(function (response) {
                        localApp.productSame = response.data;
                        console.log(JSON.stringify(this.productSame));
                        // localApp.eyewears = response.data.data;
                        console.log(JSON.stringify(response.data[0].description));
                        const prodImage = document.getElementById("prodImage");
                        const prodModel = document.getElementById("prodModel");
                        const prodName = document.getElementById("prodName");
                        const prodPrice = document.getElementById("prodPrice");
                        const prodDesc = document.getElementById("description");
                        prodImage.src = response.data[0].image_url;
                        prodModel.innerHTML = response.data[0].model;
                        prodName.innerHTML = response.data[0].name;
                        prodPrice.innerHTML = response.data[0].price;
                        prodDesc.innerHTML = response.data[0].description;

                    })
                    .catch(function (error) {
                        console.log(error);
                    });
            },
            totalPages: function () {
                var total = Math.ceil(this.totalRows / this.itemsPerPage);
                var i = 0;
                const temp = [];
                while (i < total) {
                    temp.push(i+1);
                    i++;
                }
                this.pages = temp;
                console.log(this.itemsPerPage);
                const c = document.querySelector('.pagination .container')
                const indexs = Array.from(document.querySelectorAll('.index'))
                const svg = Array.from(document.querySelectorAll('svg'))
                let cur = -1
                indexs.forEach((index, i) => {
                    index.addEventListener('click', (e) => {
                        svg[0].style = "transform: translateX(" + (32 * i) + "px)";
                        svg[1].style = "transform: translateX(" + (32 * i) + "px)";
                    })
                })
            },
        },

        created: function () {
            this.loadAllEyewear();
            // this.totalPages();
            setInterval(this.loadAllEyewear, 500);
        }
    });

    const c = document.querySelector('.pagination .container')
    const indexs = Array.from(document.querySelectorAll('.index'))
    const svg = Array.from(document.querySelectorAll('svg'))
    let cur = -1
    indexs.forEach((index, i) => {
        index.addEventListener('click', (e) => {
            svg[0].style="transform: translateX("+(20*i)+"px)";
            svg[1].style="transform: translateX("+(20*i)+"px)";
            // clear
        //     c.className = 'container'
        //     void c.offsetWidth; // Reflow
        //     c.classList.add('open')
        //     c.classList.add(`i${i + 1}`)
        //     if (cur > i) {
        //         c.classList.add('flip')
        //     }
        //     cur = i
        })
    })
</script>
<!--<script src="/landingPage.vue"></script>-->

</body>
</html>